{"ast":null,"code":"import canUseDom from './canUseDom';\nvar APPEND_ORDER = 'data-rc-order';\nvar MARK_KEY = \"rc-util-key\";\nvar containerCache = new Map();\n\nfunction getMark() {\n  var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n      mark = _ref.mark;\n\n  if (mark) {\n    return mark.startsWith('data-') ? mark : \"data-\".concat(mark);\n  }\n\n  return MARK_KEY;\n}\n\nfunction getContainer(option) {\n  if (option.attachTo) {\n    return option.attachTo;\n  }\n\n  var head = document.querySelector('head');\n  return head || document.body;\n}\n\nfunction getOrder(prepend) {\n  if (prepend === 'queue') {\n    return 'prependQueue';\n  }\n\n  return prepend ? 'prepend' : 'append';\n}\n/**\n * Find style which inject by rc-util\n */\n\n\nfunction findStyles(container) {\n  return Array.from((containerCache.get(container) || container).children).filter(function (node) {\n    return node.tagName === 'STYLE';\n  });\n}\n\nexport function injectCSS(css) {\n  var option = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n  if (!canUseDom()) {\n    return null;\n  }\n\n  var csp = option.csp,\n      prepend = option.prepend;\n  var styleNode = document.createElement('style');\n  styleNode.setAttribute(APPEND_ORDER, getOrder(prepend));\n\n  if (csp === null || csp === void 0 ? void 0 : csp.nonce) {\n    styleNode.nonce = csp === null || csp === void 0 ? void 0 : csp.nonce;\n  }\n\n  styleNode.innerHTML = css;\n  var container = getContainer(option);\n  var firstChild = container.firstChild;\n\n  if (prepend) {\n    // If is queue `prepend`, it will prepend first style and then append rest style\n    if (prepend === 'queue') {\n      var existStyle = findStyles(container).filter(function (node) {\n        return ['prepend', 'prependQueue'].includes(node.getAttribute(APPEND_ORDER));\n      });\n\n      if (existStyle.length) {\n        container.insertBefore(styleNode, existStyle[existStyle.length - 1].nextSibling);\n        return styleNode;\n      }\n    } // Use `insertBefore` as `prepend`\n\n\n    container.insertBefore(styleNode, firstChild);\n  } else {\n    container.appendChild(styleNode);\n  }\n\n  return styleNode;\n}\n\nfunction findExistNode(key) {\n  var option = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  var container = getContainer(option);\n  return findStyles(container).find(function (node) {\n    return node.getAttribute(getMark(option)) === key;\n  });\n}\n\nexport function removeCSS(key) {\n  var _existNode$parentNode;\n\n  var option = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  var existNode = findExistNode(key, option);\n  existNode === null || existNode === void 0 ? void 0 : (_existNode$parentNode = existNode.parentNode) === null || _existNode$parentNode === void 0 ? void 0 : _existNode$parentNode.removeChild(existNode);\n}\nexport function updateCSS(css, key) {\n  var option = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  var container = getContainer(option); // Get real parent\n\n  if (!containerCache.has(container)) {\n    var placeholderStyle = injectCSS('', option);\n    var parentNode = placeholderStyle.parentNode;\n    containerCache.set(container, parentNode);\n    parentNode.removeChild(placeholderStyle);\n  }\n\n  var existNode = findExistNode(key, option);\n\n  if (existNode) {\n    var _option$csp, _option$csp2;\n\n    if (((_option$csp = option.csp) === null || _option$csp === void 0 ? void 0 : _option$csp.nonce) && existNode.nonce !== ((_option$csp2 = option.csp) === null || _option$csp2 === void 0 ? void 0 : _option$csp2.nonce)) {\n      var _option$csp3;\n\n      existNode.nonce = (_option$csp3 = option.csp) === null || _option$csp3 === void 0 ? void 0 : _option$csp3.nonce;\n    }\n\n    if (existNode.innerHTML !== css) {\n      existNode.innerHTML = css;\n    }\n\n    return existNode;\n  }\n\n  var newNode = injectCSS(css, option);\n  newNode.setAttribute(getMark(option), key);\n  return newNode;\n}","map":{"version":3,"names":["canUseDom","APPEND_ORDER","MARK_KEY","containerCache","Map","getMark","_ref","arguments","length","undefined","mark","startsWith","concat","getContainer","option","attachTo","head","document","querySelector","body","getOrder","prepend","findStyles","container","Array","from","get","children","filter","node","tagName","injectCSS","css","csp","styleNode","createElement","setAttribute","nonce","innerHTML","firstChild","existStyle","includes","getAttribute","insertBefore","nextSibling","appendChild","findExistNode","key","find","removeCSS","_existNode$parentNode","existNode","parentNode","removeChild","updateCSS","has","placeholderStyle","set","_option$csp","_option$csp2","_option$csp3","newNode"],"sources":["C:/Learning/resume/node_modules/rc-util/es/Dom/dynamicCSS.js"],"sourcesContent":["import canUseDom from './canUseDom';\nvar APPEND_ORDER = 'data-rc-order';\nvar MARK_KEY = \"rc-util-key\";\nvar containerCache = new Map();\n\nfunction getMark() {\n  var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n      mark = _ref.mark;\n\n  if (mark) {\n    return mark.startsWith('data-') ? mark : \"data-\".concat(mark);\n  }\n\n  return MARK_KEY;\n}\n\nfunction getContainer(option) {\n  if (option.attachTo) {\n    return option.attachTo;\n  }\n\n  var head = document.querySelector('head');\n  return head || document.body;\n}\n\nfunction getOrder(prepend) {\n  if (prepend === 'queue') {\n    return 'prependQueue';\n  }\n\n  return prepend ? 'prepend' : 'append';\n}\n/**\n * Find style which inject by rc-util\n */\n\n\nfunction findStyles(container) {\n  return Array.from((containerCache.get(container) || container).children).filter(function (node) {\n    return node.tagName === 'STYLE';\n  });\n}\n\nexport function injectCSS(css) {\n  var option = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n  if (!canUseDom()) {\n    return null;\n  }\n\n  var csp = option.csp,\n      prepend = option.prepend;\n  var styleNode = document.createElement('style');\n  styleNode.setAttribute(APPEND_ORDER, getOrder(prepend));\n\n  if (csp === null || csp === void 0 ? void 0 : csp.nonce) {\n    styleNode.nonce = csp === null || csp === void 0 ? void 0 : csp.nonce;\n  }\n\n  styleNode.innerHTML = css;\n  var container = getContainer(option);\n  var firstChild = container.firstChild;\n\n  if (prepend) {\n    // If is queue `prepend`, it will prepend first style and then append rest style\n    if (prepend === 'queue') {\n      var existStyle = findStyles(container).filter(function (node) {\n        return ['prepend', 'prependQueue'].includes(node.getAttribute(APPEND_ORDER));\n      });\n\n      if (existStyle.length) {\n        container.insertBefore(styleNode, existStyle[existStyle.length - 1].nextSibling);\n        return styleNode;\n      }\n    } // Use `insertBefore` as `prepend`\n\n\n    container.insertBefore(styleNode, firstChild);\n  } else {\n    container.appendChild(styleNode);\n  }\n\n  return styleNode;\n}\n\nfunction findExistNode(key) {\n  var option = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  var container = getContainer(option);\n  return findStyles(container).find(function (node) {\n    return node.getAttribute(getMark(option)) === key;\n  });\n}\n\nexport function removeCSS(key) {\n  var _existNode$parentNode;\n\n  var option = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  var existNode = findExistNode(key, option);\n  existNode === null || existNode === void 0 ? void 0 : (_existNode$parentNode = existNode.parentNode) === null || _existNode$parentNode === void 0 ? void 0 : _existNode$parentNode.removeChild(existNode);\n}\nexport function updateCSS(css, key) {\n  var option = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  var container = getContainer(option); // Get real parent\n\n  if (!containerCache.has(container)) {\n    var placeholderStyle = injectCSS('', option);\n    var parentNode = placeholderStyle.parentNode;\n    containerCache.set(container, parentNode);\n    parentNode.removeChild(placeholderStyle);\n  }\n\n  var existNode = findExistNode(key, option);\n\n  if (existNode) {\n    var _option$csp, _option$csp2;\n\n    if (((_option$csp = option.csp) === null || _option$csp === void 0 ? void 0 : _option$csp.nonce) && existNode.nonce !== ((_option$csp2 = option.csp) === null || _option$csp2 === void 0 ? void 0 : _option$csp2.nonce)) {\n      var _option$csp3;\n\n      existNode.nonce = (_option$csp3 = option.csp) === null || _option$csp3 === void 0 ? void 0 : _option$csp3.nonce;\n    }\n\n    if (existNode.innerHTML !== css) {\n      existNode.innerHTML = css;\n    }\n\n    return existNode;\n  }\n\n  var newNode = injectCSS(css, option);\n  newNode.setAttribute(getMark(option), key);\n  return newNode;\n}"],"mappings":"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"},"metadata":{},"sourceType":"module"}